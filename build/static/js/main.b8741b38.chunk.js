(this["webpackJsonpyour-progress"]=this["webpackJsonpyour-progress"]||[]).push([[0],[,,,,,,function(e,t,a){e.exports={main:"Register_main__3xl0F",border:"Register_border__3K7TJ",title:"Register_title__22Lso",control:"Register_control__cs3SC",button:"Register_button__1AWx-",form:"Register_form__2BrTC",error:"Register_error__1QSWg",message:"Register_message__yeYvu"}},,,,,function(e,t,a){e.exports={main:"Login_main__2FpVe",border:"Login_border__2D7YE",title:"Login_title__1VWY9",control:"Login_control__6BE2H",form:"Login_form__8b7nq",actions:"Login_actions__3l1_c"}},,function(e,t,a){e.exports={card:"TaskCard_card__2LJdf",backdrop:"TaskCard_backdrop__3HH6J",modal:"TaskCard_modal__3pNUp",header:"TaskCard_header__2uKGK",content:"TaskCard_content__1PUNK",form:"TaskCard_form__1yYxV",actions:"TaskCard_actions__3WQJP"}},function(e,t,a){e.exports={card:"MessageModal_card__1M8mm",backdrop:"MessageModal_backdrop__2W31N",modal:"MessageModal_modal__2g7Ht",header:"MessageModal_header__4310p",content:"MessageModal_content__aSzfh",message:"MessageModal_message__3oMEp",form:"MessageModal_form__2Opu2",actions:"MessageModal_actions__DV91P"}},,,,,,function(e,t,a){e.exports={main:"ProgressItemOperation_main__Y-dXi",operation:"ProgressItemOperation_operation__q2j8B"}},function(e,t,a){e.exports={main:"ProgressList_main__fDZim",cardUl:"ProgressList_cardUl__2kJ6b",list:"ProgressList_list__281CX"}},function(e,t,a){e.exports={title_main:"Layout_title_main__29B9l"}},,,,function(e,t,a){e.exports={main:"ProgressItem_main__l-R0Z",card:"ProgressItem_card__1Ft8t",item:"ProgressItem_item__VqBWr"}},function(e,t,a){e.exports={main:"Button_main__2cf7G"}},function(e,t,a){e.exports={main:"ProgressAdd_main__1VIXr",button:"ProgressAdd_button__1l09r",actions:"ProgressAdd_actions__kJ_ni"}},,,,,,function(e,t,a){},function(e,t,a){},,,,,,,function(e,t,a){e.exports={card:"ConfirmationModal_card__K5BPK",backdrop:"ConfirmationModal_backdrop__YAHJt",modal:"ConfirmationModal_modal__1lfTy",header:"ConfirmationModal_header__10Fj5",content:"ConfirmationModal_content__26xhu",form:"ConfirmationModal_form__PxP9t",message:"ConfirmationModal_message__3SH7m",actions:"ConfirmationModal_actions__QXYl7"}},,,,,function(e,t,a){"use strict";a.r(t);var n=a(1),s=a(12),c=a.n(s),r=(a(34),a(19)),o=a(4),i=(a(35),a(5)),l=a(26),d=a.n(l),j=a(2),u=a(27),m=a.n(u),b=a(0),h=function(e){var t=e.name,a=e.type,n=e.event;return Object(b.jsx)("div",{className:m.a.main,children:Object(b.jsxs)("button",{className:"btn btn-outline-primary btn-block",type:a,onClick:n,children:[Object(b.jsx)("i",{className:e.emo}),t]})})},O=a(13),f=a.n(O),x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:"",title:"",startDate:"",endDate:""},t=Object(n.useState)(!1),a=Object(j.a)(t,2),s=a[0],r=a[1],o=Object(n.useState)(""),i=Object(j.a)(o,2),l=i[0],d=i[1],u=e,m={id:e.id,title:e.title,startDate:e.startDate,endDate:e.endDate},O=function(e){switch(e.target.name){case"title":m.title=e.target.value;break;case"startDate":m.startDate=e.target.value;break;case"endDate":m.endDate=e.target.value}},x=function(){return m.title.length<1?(d("The title can not be empty!"),r(!0),!1):m.startDate>m.endDate?(d("The Start Date must be early than End Dte!"),r(!0),!1):!(new Date(m.endDate)<Date.now())||(d("The End Date must be later than today!"),r(!0),!1)},p=function(){e.changeModalHandler((function(e){return!e}))},g=function(){x()&&(console.log(12321),e.confirmHandle(m))},_=function(e){return Object(b.jsxs)("div",{className:f.a.card,children:[Object(b.jsx)("div",{className:f.a.backdrop}),Object(b.jsxs)("div",{className:f.a.modal,id:"modal",children:[Object(b.jsx)("div",{className:f.a.header,children:Object(b.jsxs)("h2",{children:[e.action," Task"]})}),Object(b.jsx)("div",{className:f.a.content,children:Object(b.jsxs)("form",{className:f.a.form,children:[Object(b.jsx)("label",{className:"my-2",children:"Title: "}),Object(b.jsx)("input",{type:"text",name:"title",defaultValue:e.task.title,onChange:O}),Object(b.jsx)("label",{className:"my-2",children:"Start Date: "}),Object(b.jsx)("input",{defaultValue:e.task.startDate,name:"startDate",type:"date",onChange:O}),Object(b.jsx)("label",{className:"my-2",children:"End Date: "}),Object(b.jsx)("input",{defaultValue:e.task.endDate,name:"endDate",type:"date",onChange:O})]})}),Object(b.jsxs)("div",{className:f.a.actions,children:[Object(b.jsx)(h,{name:"Close",event:p}),Object(b.jsx)(h,{name:e.action,event:g})]}),s&&Object(b.jsxs)("div",{className:"alert alert-danger",children:[Object(b.jsx)("strong",{children:"Failed!"})," ",l]})]})]})};return Object(b.jsx)(n.Fragment,{children:c.a.createPortal(Object(b.jsx)(_,{task:u,action:e.action}),document.getElementById("modal"))})},p=a(20),g=a.n(p),_=a(14),v=a.n(_),k=function(e){var t=function(){e.closeHandler(!1)},a=function(e){return Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{className:v.a.backdrop}),Object(b.jsxs)("div",{className:v.a.modal,children:[Object(b.jsx)("div",{className:v.a.header,children:Object(b.jsx)("h2",{children:e.title})}),Object(b.jsx)("div",{className:v.a.content,children:Object(b.jsx)("h4",{className:v.a.message,children:e.content})}),Object(b.jsx)("div",{className:v.a.actions,children:Object(b.jsx)(h,{name:"OK",event:t})})]})]})};return Object(b.jsx)(n.Fragment,{children:c.a.createPortal(Object(b.jsx)(a,{title:e.title,content:e.content}),document.getElementById("message"))})},N=a(42),y=function(e){var t=function(){e.closeHandler(!1)},a=function(){e.yesHandler(),e.closeHandler(!1)},s=function(e){return Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{className:N.backdrop}),Object(b.jsxs)("div",{className:N.modal,children:[Object(b.jsx)("div",{className:N.header,children:Object(b.jsx)("h2",{children:e.title})}),Object(b.jsx)("div",{className:N.content,children:Object(b.jsx)("p",{className:N.message,children:e.content})}),Object(b.jsxs)("div",{className:N.actions,children:[Object(b.jsx)(h,{name:"No",event:t}),Object(b.jsx)(h,{name:"Yes",event:a})]})]})]})};return Object(b.jsx)(n.Fragment,{children:c.a.createPortal(Object(b.jsx)(s,{title:e.title,content:e.content}),document.getElementById("message"))})},D=function(e){var t=Object(n.useState)(!1),a=Object(j.a)(t,2),s=a[0],c=a[1],r=Object(n.useState)(!1),o=Object(j.a)(r,2),l=o[0],d=o[1],u=Object(n.useState)(!1),m=Object(j.a)(u,2),O=m[0],f=m[1],p=Object(n.useState)({title:"",content:""}),_=Object(j.a)(p,2),v=_[0],N=_[1],D=function(e){return{day:(e=new Date(e)).getDate()<10?"0"+e.getDate():e.getDate(),month:e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1,year:e.getFullYear()}},S=function(e){return e.year+"-"+e.month+"-"+e.day},w=D(e.startDate),C=D(e.endDate);w=S(w),C=S(C);var T=localStorage.getItem("token"),M=Object(i.b)();return Object(b.jsx)("div",{className:g.a.main,children:Object(b.jsxs)("div",{className:g.a.operation,children:[O&&Object(b.jsx)(y,{closeHandler:f,yesHandler:function(){console.log("aaa "+e.id),fetch('"http://localhost:5000//task/delete-task',{method:"DELETE",mode:"cors",headers:{auth:T,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({_id:e.id})}).then((function(e){return e.json()})).then((function(t){t.state?(N({title:"Success!",content:"You have delete the task: [ "+e.title+" ]"}),d(!0),c(!1),M({type:"taskDeleteOne",task:e.id})):(N({title:"Failed!",content:t.message}),d(!0),c(!1))}))},title:v.title,content:v.content}),l&&Object(b.jsx)(k,{closeHandler:d,title:v.title,content:v.content}),s&&Object(b.jsx)(x,{id:e.id,title:e.title,startDate:w,endDate:C,confirmHandle:function(t){fetch('"http://localhost:5000//task/update-task',{method:"POST",mode:"cors",headers:{auth:T,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(t){t.state?(N({title:"Success!",content:"You have updated the task: [ "+e.title+" ]"}),d(!0),c(!1),M({type:"taskUpdateOne",task:e.id,taskNewData:t[0]})):(N({title:"Failed!",content:t.message}),d(!0),c(!1))}))},changeModalHandler:c,action:"Update"}),Object(b.jsx)(h,{name:" Edit",event:function(){c(!0)},emo:"fas fa-edit"}),Object(b.jsx)(h,{name:" Delete",event:function(){N({title:"Delete!",content:"Would you really like to delete the task: [ "+e.title+" ]?"}),f(!0)},emo:"fas fa-trash-alt"})]})})},S=function(e){var t=new Date(e.startDate),a=new Date(e.endDate),n=new Date(Date.now()),s=e.startDate.toString().slice(0,10)+" To "+e.endDate.toString().slice(0,10),c=Math.ceil((a.getTime()-t.getTime())/864e5),r=Math.ceil((a.getTime()-n.getTime())/864e5),o=Math.max(0,Math.min(100,(c-r+1)/c*100)).toFixed(2).toString()+"%";return Object(b.jsx)("li",{className:"container p-3 my-3",id:e.id,children:Object(b.jsx)("div",{className:"card "+d.a.card,children:Object(b.jsxs)("div",{className:"card-body bg-light",children:[Object(b.jsx)("div",{children:Object(b.jsx)("h4",{className:"card-title my-3",children:e.title})}),Object(b.jsx)("div",{children:Object(b.jsxs)("p",{className:"card-text my-3",children:[Object(b.jsx)("strong",{children:r})," days far from"," ",e.title]})}),Object(b.jsx)("div",{children:Object(b.jsx)("div",{className:"progress  my-3",style:{height:"30px"},children:Object(b.jsx)("div",{className:"progress-bar progress-bar-striped progress-bar-animated",style:{width:o,height:"30px"},children:o})})}),Object(b.jsx)("div",{className:"text-left",children:Object(b.jsx)("p",{className:"card-text",children:s})}),Object(b.jsx)("div",{children:Object(b.jsx)(D,{id:e.id,title:e.title,startDate:e.startDate,endDate:e.endDate})})]})})})},w=a(21),C=a.n(w),T=function(e){var t=e.taskList.map((function(e){return Object(b.jsx)(S,{id:e._id,title:e.title,startDate:e.startDate,endDate:e.endDate},e._id)}));return Object(b.jsxs)("div",{className:C.a.main,children:[Object(b.jsx)("div",{}),Object(b.jsx)("ul",{className:"card-deck "+C.a.cardUl,children:t}),Object(b.jsx)("div",{})]})},M=a(22),P=a.n(M),A=a(28),I=a.n(A),L=function(e){var t=Object(n.useState)(!1),a=Object(j.a)(t,2),s=a[0],c=a[1],r=Object(n.useState)(!1),o=Object(j.a)(r,2),l=o[0],d=o[1],u=localStorage.getItem("token"),m=Object(i.b)(),h=Object(n.useState)({title:"",content:""}),O=Object(j.a)(h,2),f=O[0],p=O[1];return Object(b.jsx)("div",{className:"nav-item mx-auto",children:Object(b.jsxs)("div",{className:I.a.actions,children:[l&&Object(b.jsx)(k,{closeHandler:d,title:f.title,content:f.content}),s&&Object(b.jsx)(x,{action:"Create",confirmHandle:function(e){fetch('"http://localhost:5000//task/new-task',{method:"POST",mode:"cors",headers:{auth:u,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){e.state?(m({type:"taskAddOne",task:e}),p({title:"Success!",content:"You have created a new Task: [ "+e.title+" ]"}),d(!0),c(!1)):(p({title:"Failed!",content:e.message}),d(!0),c(!1))}))},changeModalHandler:c}),Object(b.jsxs)("a",{className:"text-white btn-lg btn btn-dark",onClick:function(){c(!0)},children:[Object(b.jsx)("i",{className:"fas fa-plus-circle"})," New Task"]})]})})},E=function(e){var t=Object(i.c)((function(e){return e.username})),a=localStorage.getItem("token"),n=Object(i.b)();return Object(b.jsxs)("nav",{className:"navbar navbar-expand-md bg-dark navbar-dark",children:[Object(b.jsx)("a",{className:"navbar-brand mr-auto",href:"/",children:Object(b.jsx)("i",{class:"fas fa-home"})}),Object(b.jsx)(L,{newTaskAdd:function(e){fetch('"http://localhost:5000//task/new-task',{method:"POST",mode:"cors",headers:{auth:a,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({username:e.username,title:e.title,startDate:e.startDate,endDate:e.endDate})}).then((function(e){return e.json()})).then((function(e){n({type:"taskAddOne",task:e})}))}}),Object(b.jsx)("ul",{className:"navbar-nav ml-auto",children:Object(b.jsxs)("li",{className:"nav-item dropdown",children:[Object(b.jsx)("a",{className:"nav-link dropdown-toggle",href:"#",id:"navbardrop","data-toggle":"dropdown",children:t}),Object(b.jsx)("div",{className:"dropdown-menu ",children:Object(b.jsx)("a",{className:"dropdown-item",onClick:function(){localStorage.removeItem("token"),n({type:"logout"})},href:"#",children:"Sign out"})})]})})]})},H=function(e){var t=localStorage.getItem("token"),a=Object(i.c)((function(e){return e.taskList})),s=Object(i.b)();return Object(n.useEffect)((function(){fetch('"http://localhost:5000//task/get-tasks',{method:"GET",mode:"cors",headers:{auth:t,"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){s({type:"taskUpdateAll",taskList:e})}))}),[]),Object(b.jsxs)("div",{className:P.a.main,children:[Object(b.jsx)(E,{}),a.length>0?Object(b.jsx)(T,{taskList:a}):Object(b.jsx)("div",{className:P.a.title_main,children:Object(b.jsx)("p",{className:"bg-secondary",children:"Sorry,you do not have any task!"})})]})},F=a(11),B=a.n(F),J=function(e){var t=Object(n.useState)(""),a=Object(j.a)(t,2),s=a[0],c=a[1],r=Object(n.useState)(""),o=Object(j.a)(r,2),l=o[0],d=o[1],u=Object(n.useState)(!1),m=Object(j.a)(u,2),O=m[0],f=m[1],x=Object(n.useState)(""),p=Object(j.a)(x,2),g=p[0],_=p[1],v=Object(n.useState)({}),k=Object(j.a)(v,2),N=k[0],y=k[1],D=Object(i.b)();Object(n.useEffect)((function(){O||N.token&&(localStorage.setItem("token",N.token),D({type:"login",userIsAuth:!0,username:N.username}),f(!0))}),[N]);return Object(b.jsxs)("div",{className:B.a.main,children:[Object(b.jsxs)("div",{className:B.a.border,children:[Object(b.jsx)("div",{className:B.a.title+" text-white",children:Object(b.jsx)("h1",{children:"Login"})}),Object(b.jsx)("div",{className:B.a.title+" text-white",children:Object(b.jsx)("p",{children:"Welcome to Your Progress!"})}),Object(b.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t={username:s,password:l};fetch('"http://localhost:5000//user/login',{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},mode:"cors",body:JSON.stringify(t)}).then((function(e){if(e.ok)return e.json();throw Error})).then((function(e){return y(e)})).catch((function(e){f(!0),_("username or password is incorrect!")}))},className:B.a.form,children:[Object(b.jsx)("label",{className:B.a.control,children:"Username:"}),Object(b.jsx)("input",{type:"text",name:"username",id:"username",onChange:function(e){var t=e.target.value;f(!1),c(t)},className:B.a.control}),Object(b.jsx)("label",{className:B.a.control,children:"Password:"}),Object(b.jsx)("input",{type:"password",name:"passwd",id:"passwd",onChange:function(e){var t=e.target.value;f(!1),d(t)},className:B.a.control}),O&&Object(b.jsx)("div",{className:"alert alert-danger",children:g}),Object(b.jsx)("div",{className:B.a.actions+" my-3",children:Object(b.jsx)(h,{name:"Sign in",type:"submit"})})]})]}),Object(b.jsx)("div",{className:B.a.register+" text-white",children:Object(b.jsxs)("p",{children:["New to Your Progress?"," ",Object(b.jsx)("span",{children:Object(b.jsx)("a",{className:"text-warning",href:"/register",children:"Sign on!"})})]})})]})},Y=a(6),U=a.n(Y),R=function(){var e=Object(o.e)(),t=Object(n.useState)(""),a=Object(j.a)(t,2),s=a[0],c=a[1],r=Object(n.useState)(!1),i=Object(j.a)(r,2),l=i[0],d=i[1],u=Object(n.useState)(""),m=Object(j.a)(u,2),O=m[0],f=m[1],x=Object(n.useState)(),p=Object(j.a)(x,2),g=p[0],_=p[1],v=Object(n.useState)(!1),k=Object(j.a)(v,2),N=k[0],y=k[1],D=Object(n.useState)(""),S=Object(j.a)(D,2),w=S[0],C=S[1],T=Object(n.useState)(),M=Object(j.a)(T,2),P=M[0],A=M[1],I=Object(n.useState)(!1),L=Object(j.a)(I,2),E=L[0],H=L[1],F=Object(n.useState)(""),B=Object(j.a)(F,2),J=B[0],Y=B[1],R=Object(n.useState)(!1),V=Object(j.a)(R,2),W=V[0],K=V[1],q=Object(n.useState)(""),G=Object(j.a)(q,2),X=G[0],Q=G[1];Object(n.useEffect)((function(){l&&(s.length<8?(d(!1),f("Username must be at least 8 letters")):f(""))}),[s]),Object(n.useEffect)((function(){N&&(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[\s\S]{8,16}$/.test(g)?C(""):(y(!1),C("Password must include 8-16 characters, one capital letter and one number!")))}),[g]),Object(n.useEffect)((function(){E&&(P!==g?(H(!1),Y("Please confirm your password again!")):Y(""))}),[P]);return Object(b.jsx)("div",{className:U.a.main,children:Object(b.jsxs)("div",{className:U.a.border,children:[Object(b.jsx)("div",{className:U.a.title+" text-white",children:Object(b.jsx)("h1",{children:"Sign on"})}),Object(b.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t={username:s,password:g};fetch('"http://localhost:5000//user/new-user',{method:"POST",mode:"cors",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error(e)}))})).catch((function(e){K(!0),Q(e.message)}))},className:U.a.form,children:[Object(b.jsx)("label",{className:U.a.control,children:"Username:"}),Object(b.jsx)("input",{className:U.a.control,type:"text",name:"username",onBlur:function(e){c(e.target.value)},onChange:function(){d(!0)},required:!0}),""!==O?Object(b.jsx)("p",{className:U.a.error,children:O}):"",Object(b.jsx)("label",{className:U.a.control,children:"Password:"}),Object(b.jsx)("input",{className:U.a.control,type:"password",name:"passwd",onBlur:function(e){_(e.target.value)},onChange:function(){y(!0)},required:!0}),""!==w?Object(b.jsx)("p",{className:U.a.error,children:w}):"",Object(b.jsx)("label",{className:U.a.control,children:"Confirm Password:"}),Object(b.jsx)("input",{className:U.a.control,type:"password",name:"confirm_passwd",onBlur:function(e){A(e.target.value)},onChange:function(){H(!0)},required:!0}),""!==J?Object(b.jsx)("p",{className:U.a.error,children:J}):"",Object(b.jsxs)("div",{className:"my-3 d-flex flex-row justify-content-center",children:[Object(b.jsx)(h,{name:"Back",event:function(){e.push("/")}}),Object(b.jsx)(h,{name:"Sign on",type:"submit"})]})]}),W&&Object(b.jsx)("div",{className:U.a.message,children:Object(b.jsx)("div",{className:"alert alert-danger",children:X})})]})})};var V=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.userIsAuth}));return Object(n.useEffect)((function(){if(!t){var a=localStorage.getItem("token");a&&fetch('"http://localhost:5000//',{method:"GET",mode:"cors",headers:{auth:a,Accept:"application/json"}}).then((function(e){if(e.ok)return e.json();throw e.json()})).then((function(t){e({type:"login",userIsAuth:!0,username:t.username})})).catch((function(e){console.log(e)}))}}),[t]),Object(b.jsx)(r.a,{children:Object(b.jsxs)(n.Fragment,{children:[Object(b.jsx)(o.a,{exact:!0,path:"/",children:t?Object(b.jsx)(H,{}):Object(b.jsx)(J,{})}),Object(b.jsx)(o.a,{path:"/register",children:Object(b.jsx)(R,{})})]})})},W=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,48)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,c=t.getLCP,r=t.getTTFB;a(e),n(e),s(e),c(e),r(e)}))},K=a(29),q={userIsAuth:!1,username:"",taskList:[]},G=Object(K.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"login":case"logout":return{userIsAuth:t.userIsAuth,username:t.username,taskList:e.taskList};case"taskAddOne":return q;case"taskUpdateAll":return{userIsAuth:e.userIsAuth,username:e.username,taskList:t.taskList};case"taskUpdateOne":var a=e.taskList.map((function(e){return e._id===t.task?(console.log(e._id),t.taskNewData):e}));return console.log(a),{userIsAuth:e.userIsAuth,username:e.username,taskList:a};case"taskDeleteOne":console.log("task = "+t.task);var n=e.taskList.filter((function(e){return e._id!==t.task}));return{userIsAuth:e.userIsAuth,username:e.username,taskList:n}}return e}));c.a.render(Object(b.jsx)(i.a,{store:G,children:Object(b.jsx)(V,{})}),document.getElementById("root")),W()}],[[47,1,2]]]);
//# sourceMappingURL=main.b8741b38.chunk.js.map